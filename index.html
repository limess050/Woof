<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Woof : Woof's Model for Codeigniter - Less Easy Flexible" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Woof</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/KKYrang/Woof">View on GitHub</a>

          <h1 id="project_title">Woof</h1>
          <h2 id="project_tagline">Woof's Model for Codeigniter - Less Easy Flexible</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/KKYrang/Woof/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/KKYrang/Woof/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>Copy file <strong>Woof.php</strong> to libraries folder and set auto load library in <strong>config/autoload.php</strong></p>

<pre><code>$autoload[‘libraries’] = array(‘woof’);
</code></pre>

<hr><h1>
<a name="implement-your-model" class="anchor" href="#implement-your-model"><span class="octicon octicon-link"></span></a>Implement your Model</h1>

<p>Every models in your application extends from <strong>Woof</strong> class. Afterward you must define attributes in attributeRule() and set database, table name and other in initialize() as example</p>

<pre><code>class foo extends Woof
{
  protected function attributeRule()
  {
    return array(
      // Define id field and set Primary key
      array('name'=&gt;'id', 'pk'=&gt;true),
      array('name'=&gt;'fname'),
      array('name'=&gt;'sname')
    );
  }
  protected function initialize()
  {
    // Set select database
    $this-&gt;db = 'default'
    // Set table name
    $this-&gt;db = 'foo'
  }
}
</code></pre>

<p><strong>Note:</strong> The <strong>pk</strong> is sign to indicate that attribute is primary key. It'll combine with another method such as <em>findByPk()</em>, <em>updateByPk()</em>, <em>deleteByPk()</em> if you not set those method will not work. By the way you can set pk attribute through <strong>pkField</strong> attribute in initialize()</p>

<hr><h1>
<a name="crud" class="anchor" href="#crud"><span class="octicon octicon-link"></span></a>CRUD</h1>

<p>CRUD is basic function that interacting with database, It contains four functions such as CREATE, READ, UPDATE and DELETE</p>

<h3>
<a name="insert" class="anchor" href="#insert"><span class="octicon octicon-link"></span></a>insert()</h3>

<p>Add single record to database. You can set value to attributes which you have defined in attributeRule() method.</p>

<p><em>Syntax</em></p>

<pre><code>bool insert();
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model('foo');
$this-&gt;foo-&gt;fname = 'Petit';
$this-&gt;foo-&gt;sname = 'Wong';
$this-&gt;foo-&gt;insert();
</code></pre>

<h3>
<a name="set" class="anchor" href="#set"><span class="octicon octicon-link"></span></a>set()</h3>

<p>Alternative way to setting value through this method rather than put value directly to attribute</p>

<p><em>Syntax</em></p>

<pre><code>void set(fieldname, value);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;set(‘fname’, ‘Petit’);
</code></pre>

<h3>
<a name="update" class="anchor" href="#update"><span class="octicon octicon-link"></span></a>update()</h3>

<p>Update records by specific conditions. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>bool update(Mixed);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;fname = ‘Windy’;
$this-&gt;foo-&gt;update(array(‘fname’=&gt;’Petit’));
</code></pre>

<h3>
<a name="updatebypk" class="anchor" href="#updatebypk"><span class="octicon octicon-link"></span></a>updateByPk()</h3>

<p>Change data in record by specific primary key value</p>

<p><em>Syntax</em></p>

<pre><code>bool updateByPk(value);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;fname = ‘Windy’;
$this-&gt;foo-&gt;updateByPk(1);
</code></pre>

<h3>
<a name="delete" class="anchor" href="#delete"><span class="octicon octicon-link"></span></a>delete()</h3>

<p>Remove records by specific conditions. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>bool delete(mixed $conditions);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;delete(array(‘fname’=&gt;’Petit’));
</code></pre>

<h3>
<a name="deletebypk" class="anchor" href="#deletebypk"><span class="octicon octicon-link"></span></a>deleteByPk()</h3>

<p>Remove record by specific primary key value</p>

<p><em>Syntax</em></p>

<pre><code>bool deleteByPk(mixed $pkvalue);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;deleteByPk(1);
</code></pre>

<h3>
<a name="find" class="anchor" href="#find"><span class="octicon octicon-link"></span></a>find()</h3>

<p>Get single record by specific conditions. If result not found it’ll return blank object. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>object find([mixed $conditions]  [, array $fieldsname]);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$row = $this-&gt;foo-&gt;find(array(‘id’=&gt;1));
echo $row-&gt;fname . ‘ ‘ . $row-&gt;sname; // Petit Wong

// You can also specific fields name
$row = $this-&gt;foo-&gt;find(array(‘id=&gt;1’), array(‘fname’));
echo $row-&gt;fname . ‘ ‘ . $row-&gt;sname; // Petit
</code></pre>

<h3>
<a name="findall" class="anchor" href="#findall"><span class="octicon octicon-link"></span></a>findAll()</h3>

<p>Get records by specific conditions. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>array findAll([mixed $conditions] [, array $fieldsname]);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘product’);

// Retrieve all records
$this-&gt;product-&gt;findAll(); 

// Retrieve records that has type_id = 1
$this-&gt;product-&gt;findAll(array(‘type_id’ =&gt; 1)); 

// Retrieve all records and select only product_id and productname fields
$this-&gt;product-&gt;findAll(null, array(‘product_id’,’product_name’)); 
</code></pre>

<h3>
<a name="findbypk" class="anchor" href="#findbypk"><span class="octicon octicon-link"></span></a>findByPk()</h3>

<p>Get a record by specific primary key value</p>

<p><em>Syntax</em></p>

<pre><code>object findByPk(mixed $value [, array $fieldsname]);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$row = $this-&gt;foo-&gt;findByPk(1)
echo $row-&gt;fname . ‘ ‘ . $row-&gt;sname; // Petit Wong

// Put fields parameter
$row = $this-&gt;foo-&gt;findByPk(1, array(‘fname’);
echo $row-&gt;fname . ‘ ‘ . $row-&gt;sname // Petit
</code></pre>

<h3>
<a name="findbysql" class="anchor" href="#findbysql"><span class="octicon octicon-link"></span></a>findBySql()</h3>

<p>Get record using SQL query command;</p>

<p><em>Syntax</em></p>

<pre><code>array findBySql(string $sqlcommand);
</code></pre>

<p><em>Usage</em></p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;findBySql(‘SELECT * FROM foo’);
</code></pre>

<h3>
<a name="count" class="anchor" href="#count"><span class="octicon octicon-link"></span></a>count()</h3>

<p>Get number of record in the table. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>number count([mixed $conditions]);
</code></pre>

<h3>
<a name="max" class="anchor" href="#max"><span class="octicon octicon-link"></span></a>max()</h3>

<p>Get maximun value of field. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>number max(string $fieldname [, mixed $conditions]);
</code></pre>

<hr><h3>
<a name="min" class="anchor" href="#min"><span class="octicon octicon-link"></span></a>min()</h3>

<p>Get minimum value of field. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>number min(string $fieldname [, mixed $conditions]);
</code></pre>

<h3>
<a name="avg" class="anchor" href="#avg"><span class="octicon octicon-link"></span></a>avg()</h3>

<p>Get average value of field. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>number avg(string $fieldname [, mixed $conditions]);
</code></pre>

<h3>
<a name="sum" class="anchor" href="#sum"><span class="octicon octicon-link"></span></a>sum()</h3>

<p>Get summary value of field. You can pass Array or Criteria object perform conditions. See also How to define conditions.</p>

<p><em>Syntax</em></p>

<pre><code>number sum(string $fieldname [, mixed $conditions]);
</code></pre>

<h3>
<a name="insertid" class="anchor" href="#insertid"><span class="octicon octicon-link"></span></a>insertId()</h3>

<p>Get last insert id of table</p>

<h3>
<a name="lastquery" class="anchor" href="#lastquery"><span class="octicon octicon-link"></span></a>lastQuery()</h3>

<p>Get last SQL queryl command</p>

<h1>
<a name="how-to-define-command" class="anchor" href="#how-to-define-command"><span class="octicon octicon-link"></span></a>How to define command</h1>

<p>You can direct access to db object which's Active Record object of Codeigniter and add command to query. By the way, there are several ways to assign command or condition by using Array or Criteria that hold your command. And now I'll show three ways how to assign command to query data.</p>

<h3>
<a name="1-direct-through-db-object" class="anchor" href="#1-direct-through-db-object"><span class="octicon octicon-link"></span></a>1) Direct through db object</h3>

<p>The <strong>db</strong> is Active Record object’s Codeigniter. You can access through <strong>db()</strong> method to assign command.</p>

<pre><code>$this-&gt;load-&gt;model(‘foo’);
$this-&gt;foo-&gt;db()-&gt;select(‘*’);
$this-&gt;foo-&gt;db()-&gt;where(‘field1 = 1’);
</code></pre>

<h3>
<a name="2-use-array" class="anchor" href="#2-use-array"><span class="octicon octicon-link"></span></a>2) Use Array</h3>

<p>You can assign command by using multiple array. The commands contain many of arrays which has different key that represent command to query data.</p>

<pre><code>array = (
    array(‘select’ =&gt; ‘*’),
    array(‘where’ =&gt; ‘field1 = 1’)
);
</code></pre>

<h3>
<a name="3-use-criteria" class="anchor" href="#3-use-criteria"><span class="octicon octicon-link"></span></a>3) Use Criteria</h3>

<p>Criteria is similar Array, but Criteria is object.</p>

<pre><code>Criteria is similar Array, but Criteria is object.
$obj = new Criteria
$obj-&gt;select = ‘*’;
$obj-&gt;where = ‘field1 = 1’;
</code></pre>

<p><strong>List of command</strong></p>

<ul>
<li>select</li>
<li>distinct</li>
<li>like</li>
<li>or_like</li>
<li>not_like</li>
<li>or_not_like</li>
<li>join</li>
<li>left</li>
<li>right</li>
<li>outer</li>
<li>inner</li>
<li>left_outer</li>
<li>right_outer</li>
<li>where</li>
<li>or_where</li>
<li>where_in</li>
<li>where_not_in</li>
<li>or_where_not_in</li>
<li>group_by</li>
<li>having</li>
<li>or_having</li>
<li>order_by</li>
<li>limit</li>
<li>offset</li>
</ul><p>**Note: ** If you notice, Nearly all of commands refer to Codeigniter's Active Record object. You can reference object <a href="http://ellislab.com/codeigniter/user-guide/database/active_record.html">in this source</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Woof maintained by <a href="https://github.com/KKYrang">KKYrang</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
